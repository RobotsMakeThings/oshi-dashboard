<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‚ú® Oshi ‚Äî Prediction Agent Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&family=Orbitron:wght@400;500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
:root {
  /* Oshi's Teal Theme */
  --oshi-teal: #00d4aa;
  --oshi-teal-light: #00ffd0;
  --oshi-teal-glow: rgba(0, 212, 170, 0.4);
  
  /* Platform Colors */
  --kalshi: #00d4aa;
  --kalshi-glow: rgba(0, 212, 170, 0.3);
  --polymarket: #00a8ff;
  --polymarket-glow: rgba(0, 168, 255, 0.3);
  
  /* Anime Accent Colors */
  --pink: #ff6b9d;
  --pink-glow: rgba(255, 107, 157, 0.3);
  --purple: #a855f7;
  --purple-glow: rgba(168, 85, 247, 0.3);
  --gold: #ffd700;
  
  /* Status */
  --win: #00d4aa;
  --loss: #ff5c8a;
  --neutral: #8892b0;
  
  /* Backgrounds */
  --bg-deep: #0a0e1a;
  --bg-card: rgba(15, 20, 35, 0.95);
  --bg-glass: rgba(255, 255, 255, 0.03);
  --border: rgba(0, 212, 170, 0.15);
  --border-glow: rgba(0, 212, 170, 0.4);
  
  /* Text */
  --text-primary: #f0f4ff;
  --text-secondary: #8892b0;
  --text-dim: #5a6480;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: var(--bg-deep);
  color: var(--text-primary);
  font-family: 'Quicksand', sans-serif;
  min-height: 100vh;
  overflow-x: hidden;
  position: relative;
}

/* === ANIMATED BACKGROUND === */
.bg-effects {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 0;
}

.bg-gradient {
  position: absolute;
  width: 100%;
  height: 100%;
  background: 
    radial-gradient(ellipse at 20% 20%, rgba(0, 212, 170, 0.08) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 80%, rgba(0, 168, 255, 0.08) 0%, transparent 50%),
    radial-gradient(ellipse at 50% 50%, rgba(168, 85, 247, 0.05) 0%, transparent 60%);
}

.sparkle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: white;
  border-radius: 50%;
  animation: sparkle 3s ease-in-out infinite;
  box-shadow: 0 0 10px 2px rgba(255, 255, 255, 0.5);
}

@keyframes sparkle {
  0%, 100% { opacity: 0; transform: scale(0); }
  50% { opacity: 1; transform: scale(1); }
}

.main-container {
  position: relative;
  z-index: 1;
  max-width: 1400px;
  margin: 0 auto;
  padding: 20px;
}

/* === HERO HEADER === */
.hero-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 30px 40px;
  margin-bottom: 30px;
  background: var(--bg-card);
  border-radius: 24px;
  border: 1px solid var(--border);
  position: relative;
  overflow: hidden;
}

.hero-header::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--kalshi), var(--purple), var(--polymarket));
}

.hero-header::after {
  content: '';
  position: absolute;
  top: -50%;
  right: -10%;
  width: 400px;
  height: 400px;
  background: radial-gradient(circle, var(--oshi-teal-glow) 0%, transparent 70%);
  pointer-events: none;
}

.hero-left {
  display: flex;
  align-items: center;
  gap: 24px;
  z-index: 2;
}

.oshi-avatar-container {
  position: relative;
}

.oshi-avatar {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid var(--oshi-teal);
  box-shadow: 
    0 0 20px var(--oshi-teal-glow),
    0 0 40px var(--oshi-teal-glow),
    inset 0 0 20px rgba(0, 212, 170, 0.1);
  animation: avatarGlow 3s ease-in-out infinite;
}

@keyframes avatarGlow {
  0%, 100% { box-shadow: 0 0 20px var(--oshi-teal-glow), 0 0 40px var(--oshi-teal-glow); }
  50% { box-shadow: 0 0 30px var(--oshi-teal-glow), 0 0 60px var(--oshi-teal-glow); }
}

.avatar-ring {
  position: absolute;
  top: -5px;
  left: -5px;
  right: -5px;
  bottom: -5px;
  border: 2px solid transparent;
  border-top-color: var(--pink);
  border-radius: 50%;
  animation: spin 4s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.hero-brand {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.hero-brand h1 {
  font-family: 'Orbitron', sans-serif;
  font-size: 36px;
  font-weight: 700;
  letter-spacing: 4px;
  background: linear-gradient(135deg, var(--oshi-teal-light), var(--oshi-teal), var(--polymarket));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 0 30px var(--oshi-teal-glow);
}

.hero-brand .tagline {
  font-size: 14px;
  color: var(--text-secondary);
  letter-spacing: 3px;
  text-transform: uppercase;
}

.hero-right {
  display: flex;
  align-items: center;
  gap: 20px;
  z-index: 2;
}

.status-pill {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 24px;
  background: linear-gradient(135deg, rgba(0, 212, 170, 0.15), rgba(0, 168, 255, 0.15));
  border-radius: 50px;
  border: 1px solid var(--border);
}

.status-dot {
  width: 10px;
  height: 10px;
  background: var(--oshi-teal);
  border-radius: 50%;
  animation: pulse 2s ease-in-out infinite;
  box-shadow: 0 0 10px var(--oshi-teal);
}

@keyframes pulse {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.2); opacity: 0.7; }
}

.status-text {
  font-family: 'Space Mono', monospace;
  font-size: 13px;
  color: var(--oshi-teal);
  letter-spacing: 1px;
}

.version-badge {
  font-family: 'Space Mono', monospace;
  padding: 8px 16px;
  background: var(--bg-glass);
  border: 1px solid var(--purple);
  border-radius: 8px;
  font-size: 12px;
  color: var(--purple);
}

/* Bags CA */
.bags-ca {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
  padding: 6px 12px;
  background: rgba(255, 215, 0, 0.1);
  border: 1px solid var(--gold);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 12px;
}

.bags-ca:hover {
  background: rgba(255, 215, 0, 0.2);
  box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
}

.ca-label {
  color: var(--gold);
  font-weight: 700;
}

.ca-value {
  font-family: 'Space Mono', monospace;
  color: var(--text-secondary);
  font-size: 11px;
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.ca-copy {
  font-size: 14px;
  opacity: 0.7;
  transition: opacity 0.2s;
}

.bags-ca:hover .ca-copy {
  opacity: 1;
}

/* Trade Button */
.trade-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 20px;
  background: linear-gradient(135deg, var(--kalshi), var(--oshi-teal-light));
  border: none;
  border-radius: 12px;
  color: var(--bg-deep);
  font-family: 'Quicksand', sans-serif;
  font-size: 14px;
  font-weight: 700;
  text-decoration: none;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px var(--kalshi-glow);
}

.trade-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 25px var(--kalshi-glow);
}

/* Social Button */
.social-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  border-radius: 12px;
  text-decoration: none;
  transition: all 0.3s ease;
}

.x-btn {
  background: var(--bg-glass);
  border: 1px solid var(--text-dim);
  color: var(--text-primary);
}

.x-btn:hover {
  background: var(--text-primary);
  color: var(--bg-deep);
  border-color: var(--text-primary);
  transform: translateY(-2px);
}

/* === BALANCE BANNER === */
.balance-banner {
  display: flex;
  justify-content: center;
  gap: 60px;
  padding: 24px 40px;
  margin-bottom: 30px;
  background: var(--bg-card);
  border-radius: 20px;
  border: 1px solid var(--border);
  position: relative;
}

.balance-item {
  display: flex;
  align-items: center;
  gap: 16px;
}

.balance-icon {
  width: 50px;
  height: 50px;
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
}

.balance-item.kalshi .balance-icon {
  background: linear-gradient(135deg, rgba(0, 212, 170, 0.2), rgba(0, 212, 170, 0.05));
  border: 1px solid var(--kalshi);
  box-shadow: 0 0 20px var(--kalshi-glow);
}

.balance-item.polymarket .balance-icon {
  background: linear-gradient(135deg, rgba(0, 168, 255, 0.2), rgba(0, 168, 255, 0.05));
  border: 1px solid var(--polymarket);
  box-shadow: 0 0 20px var(--polymarket-glow);
}

.balance-info .label {
  font-size: 12px;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 4px;
}

.balance-info .value {
  font-family: 'Space Mono', monospace;
  font-size: 26px;
  font-weight: 700;
}

.balance-item.kalshi .value { color: var(--kalshi); text-shadow: 0 0 20px var(--kalshi-glow); }
.balance-item.polymarket .value { color: var(--polymarket); text-shadow: 0 0 20px var(--polymarket-glow); }

.balance-divider {
  width: 1px;
  background: linear-gradient(180deg, transparent, var(--border), transparent);
}

/* === PLATFORM GRID === */
.platform-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
  margin-bottom: 30px;
}

.platform-card {
  background: var(--bg-card);
  border-radius: 24px;
  padding: 28px;
  border: 1px solid var(--border);
  position: relative;
  overflow: hidden;
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.platform-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
}

.platform-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  border-radius: 4px 4px 0 0;
}

.platform-card.kalshi::before {
  background: linear-gradient(90deg, var(--kalshi), var(--oshi-teal-light));
  box-shadow: 0 0 20px var(--kalshi-glow);
}

.platform-card.polymarket::before {
  background: linear-gradient(90deg, var(--polymarket), #00d4ff);
  box-shadow: 0 0 20px var(--polymarket-glow);
}

.platform-card::after {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  width: 150px;
  height: 150px;
  border-radius: 50%;
  pointer-events: none;
}

.platform-card.kalshi::after {
  background: radial-gradient(circle, var(--kalshi-glow) 0%, transparent 70%);
}

.platform-card.polymarket::after {
  background: radial-gradient(circle, var(--polymarket-glow) 0%, transparent 70%);
}

.platform-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
  position: relative;
  z-index: 2;
}

.platform-identity {
  display: flex;
  align-items: center;
  gap: 16px;
}

.platform-logo {
  width: 56px;
  height: 56px;
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 26px;
}

.kalshi .platform-logo {
  background: linear-gradient(135deg, rgba(0, 212, 170, 0.25), rgba(0, 212, 170, 0.1));
  border: 2px solid var(--kalshi);
  box-shadow: 0 0 20px var(--kalshi-glow), inset 0 0 20px var(--kalshi-glow);
}

.polymarket .platform-logo {
  background: linear-gradient(135deg, rgba(0, 168, 255, 0.25), rgba(0, 168, 255, 0.1));
  border: 2px solid var(--polymarket);
  box-shadow: 0 0 20px var(--polymarket-glow), inset 0 0 20px var(--polymarket-glow);
}

.platform-meta h2 {
  font-family: 'Orbitron', sans-serif;
  font-size: 18px;
  letter-spacing: 3px;
}

.kalshi .platform-meta h2 { color: var(--kalshi); }
.polymarket .platform-meta h2 { color: var(--polymarket); }

.platform-meta .timeframe {
  font-size: 13px;
  color: var(--text-dim);
  margin-top: 2px;
}

.platform-stats {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
  position: relative;
  z-index: 2;
}

.stat-card {
  background: var(--bg-glass);
  border-radius: 16px;
  padding: 20px;
  text-align: center;
  border: 1px solid rgba(255, 255, 255, 0.05);
  transition: all 0.3s ease;
}

.stat-card:hover {
  background: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.1);
}

.stat-card .value {
  font-family: 'Space Mono', monospace;
  font-size: 32px;
  font-weight: 700;
  margin-bottom: 8px;
}

.stat-card .value.win { color: var(--win); text-shadow: 0 0 15px var(--kalshi-glow); }
.stat-card .value.loss { color: var(--loss); text-shadow: 0 0 15px var(--pink-glow); }
.stat-card .value.neutral { color: var(--neutral); }
.stat-card .value.positive { color: var(--win); text-shadow: 0 0 15px var(--kalshi-glow); }
.stat-card .value.negative { color: var(--loss); text-shadow: 0 0 15px var(--pink-glow); }

.stat-card .label {
  font-size: 11px;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 2px;
}

/* === ACTIVE POSITIONS === */
.section-card {
  background: var(--bg-card);
  border-radius: 24px;
  padding: 28px;
  margin-bottom: 24px;
  border: 1px solid var(--border);
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--border);
}

.section-header h3 {
  font-family: 'Orbitron', sans-serif;
  font-size: 14px;
  letter-spacing: 3px;
  color: var(--text-secondary);
  display: flex;
  align-items: center;
  gap: 10px;
}

.section-badge {
  background: linear-gradient(135deg, var(--oshi-teal-glow), var(--purple-glow));
  padding: 6px 14px;
  border-radius: 20px;
  font-size: 12px;
  font-family: 'Space Mono', monospace;
  color: var(--oshi-teal);
  border: 1px solid var(--oshi-teal);
}

.positions-grid {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.position-row {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px 20px;
  background: var(--bg-glass);
  border-radius: 16px;
  border: 1px solid transparent;
  transition: all 0.3s ease;
}

.position-row:hover {
  background: rgba(255, 255, 255, 0.05);
}

.position-row.kalshi { border-left: 3px solid var(--kalshi); }
.position-row.polymarket { border-left: 3px solid var(--polymarket); }

.position-platform-icon {
  width: 40px;
  height: 40px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
}

.position-row.kalshi .position-platform-icon {
  background: rgba(0, 212, 170, 0.15);
}

.position-row.polymarket .position-platform-icon {
  background: rgba(0, 168, 255, 0.15);
}

.position-details {
  flex: 1;
}

.position-market {
  font-weight: 600;
  font-size: 15px;
  margin-bottom: 4px;
}

.position-meta {
  font-size: 12px;
  color: var(--text-dim);
  font-family: 'Space Mono', monospace;
}

.position-pnl {
  font-family: 'Space Mono', monospace;
  font-size: 16px;
  font-weight: 700;
  padding: 8px 16px;
  border-radius: 10px;
}

.position-pnl.positive {
  background: rgba(0, 212, 170, 0.15);
  color: var(--win);
}

.position-pnl.negative {
  background: rgba(255, 92, 138, 0.15);
  color: var(--loss);
}

.position-alert {
  padding: 6px 12px;
  border-radius: 8px;
  font-size: 11px;
  font-weight: 600;
  background: rgba(255, 107, 157, 0.2);
  color: var(--pink);
  animation: alertPulse 2s ease-in-out infinite;
}

@keyframes alertPulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

.no-positions {
  text-align: center;
  padding: 40px;
  color: var(--text-dim);
  font-style: italic;
}

/* === INSIGHTS GRID === */
.insights-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 16px;
}

.insight-card {
  background: var(--bg-glass);
  border-radius: 16px;
  padding: 20px;
  text-align: center;
  border: 1px solid var(--border);
  transition: all 0.3s ease;
}

.insight-card:hover {
  transform: translateY(-4px);
  border-color: var(--oshi-teal);
}

.insight-value {
  font-family: 'Space Mono', monospace;
  font-size: 28px;
  font-weight: 700;
  margin-bottom: 8px;
}

.insight-value.high { color: var(--win); }
.insight-value.medium { color: var(--gold); }
.insight-value.low { color: var(--loss); }

.insight-label {
  font-size: 10px;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 1.5px;
}

/* === RECENT TRADES === */
.trades-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.trade-row {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px 20px;
  background: var(--bg-glass);
  border-radius: 16px;
  transition: all 0.3s ease;
}

.trade-row:hover {
  background: rgba(255, 255, 255, 0.05);
}

.trade-icon {
  width: 44px;
  height: 44px;
  border-radius: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
}

.trade-row.kalshi .trade-icon { background: rgba(0, 212, 170, 0.15); }
.trade-row.polymarket .trade-icon { background: rgba(0, 168, 255, 0.15); }

.trade-info {
  flex: 1;
}

.trade-market {
  font-weight: 600;
  font-size: 15px;
  margin-bottom: 3px;
}

.trade-meta {
  font-size: 12px;
  color: var(--text-dim);
}

.trade-outcome {
  padding: 6px 14px;
  border-radius: 10px;
  font-size: 12px;
  font-weight: 700;
  letter-spacing: 1px;
}

.trade-outcome.win {
  background: linear-gradient(135deg, rgba(0, 212, 170, 0.2), rgba(0, 212, 170, 0.1));
  color: var(--win);
  border: 1px solid var(--win);
}

.trade-outcome.loss {
  background: linear-gradient(135deg, rgba(255, 92, 138, 0.2), rgba(255, 92, 138, 0.1));
  color: var(--loss);
  border: 1px solid var(--loss);
}

.trade-pnl {
  font-family: 'Space Mono', monospace;
  font-size: 16px;
  font-weight: 700;
  min-width: 90px;
  text-align: right;
}

.trade-pnl.positive { color: var(--win); }
.trade-pnl.negative { color: var(--loss); }

/* === FOOTER === */
.footer {
  text-align: center;
  padding: 30px;
  color: var(--text-dim);
}

.footer .refresh-line {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  margin-bottom: 10px;
}

.footer .refresh-time {
  font-family: 'Space Mono', monospace;
  color: var(--text-secondary);
}

.footer .brand-line {
  font-size: 13px;
}

.footer a {
  color: var(--oshi-teal);
  text-decoration: none;
  transition: color 0.2s;
}

.footer a:hover {
  color: var(--oshi-teal-light);
}

/* === ARCHITECTURE SECTION === */
.architecture-section {
  background: var(--bg-card);
  border-radius: 24px;
  padding: 40px;
  margin-bottom: 24px;
  border: 1px solid var(--border);
  position: relative;
  overflow: hidden;
}

.architecture-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, var(--purple), var(--pink), var(--oshi-teal), var(--polymarket));
}

.arch-header {
  text-align: center;
  margin-bottom: 40px;
}

.arch-header h2 {
  font-family: 'Orbitron', sans-serif;
  font-size: 24px;
  letter-spacing: 4px;
  background: linear-gradient(135deg, var(--purple), var(--pink));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 12px;
}

.arch-subtitle {
  color: var(--text-secondary);
  font-size: 14px;
  letter-spacing: 1px;
}

.arch-diagram {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 24px;
}

/* Spirit Node */
.arch-spirit {
  text-align: center;
  max-width: 400px;
}

.spirit-node {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  padding: 20px 32px;
  background: linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(255, 107, 157, 0.2));
  border: 2px solid var(--purple);
  border-radius: 20px;
  margin-bottom: 12px;
  box-shadow: 0 0 30px var(--purple-glow), inset 0 0 20px rgba(168, 85, 247, 0.1);
  animation: spiritPulse 3s ease-in-out infinite;
}

@keyframes spiritPulse {
  0%, 100% { box-shadow: 0 0 30px var(--purple-glow); }
  50% { box-shadow: 0 0 50px var(--purple-glow), 0 0 80px rgba(255, 107, 157, 0.2); }
}

.spirit-node h3 {
  font-family: 'Orbitron', sans-serif;
  font-size: 18px;
  color: var(--purple);
  letter-spacing: 3px;
}

.spirit-node p {
  font-size: 12px;
  color: var(--text-secondary);
}

.spirit-desc {
  font-size: 13px;
  color: var(--text-dim);
  line-height: 1.6;
  padding: 0 20px;
}

.node-icon {
  font-size: 32px;
}

.spirit-icon {
  animation: float 3s ease-in-out infinite;
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

/* Connectors */
.arch-connectors {
  height: 40px;
  display: flex;
  justify-content: center;
  position: relative;
}

.connector-line {
  width: 2px;
  height: 100%;
  background: linear-gradient(180deg, var(--purple), var(--oshi-teal));
  position: relative;
}

.connector-line::after {
  content: '‚ñº';
  position: absolute;
  bottom: -8px;
  left: 50%;
  transform: translateX(-50%);
  color: var(--oshi-teal);
  font-size: 10px;
}

.arch-connectors.middle {
  width: 60%;
  justify-content: space-around;
}

/* Brain Row */
.arch-brain-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 24px;
  width: 100%;
  max-width: 900px;
}

.brain-node {
  flex: 1;
  max-width: 340px;
  padding: 24px;
  border-radius: 20px;
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
}

.brain-node:hover {
  transform: translateY(-4px);
}

.left-brain {
  background: linear-gradient(135deg, rgba(0, 168, 255, 0.15), rgba(0, 168, 255, 0.05));
  border: 1px solid var(--polymarket);
  box-shadow: 0 0 20px var(--polymarket-glow);
}

.right-brain {
  background: linear-gradient(135deg, rgba(0, 212, 170, 0.15), rgba(0, 212, 170, 0.05));
  border: 1px solid var(--kalshi);
  box-shadow: 0 0 20px var(--kalshi-glow);
}

.node-glow {
  position: absolute;
  width: 100px;
  height: 100px;
  border-radius: 50%;
  filter: blur(40px);
  pointer-events: none;
}

.left-glow {
  top: -20px;
  right: -20px;
  background: var(--polymarket);
  opacity: 0.3;
}

.right-glow {
  top: -20px;
  left: -20px;
  background: var(--kalshi);
  opacity: 0.3;
}

.brain-node .node-content {
  position: relative;
  z-index: 2;
}

.brain-node h3 {
  font-family: 'Orbitron', sans-serif;
  font-size: 16px;
  letter-spacing: 2px;
  margin-bottom: 6px;
}

.left-brain h3 { color: var(--polymarket); }
.right-brain h3 { color: var(--kalshi); }

.node-role {
  display: inline-block;
  padding: 4px 12px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 12px;
}

.left-brain .node-role {
  background: rgba(0, 168, 255, 0.2);
  color: var(--polymarket);
}

.right-brain .node-role {
  background: rgba(0, 212, 170, 0.2);
  color: var(--kalshi);
}

.brain-node p {
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.5;
}

.node-flow {
  margin-top: 12px;
}

.flow-tag {
  font-family: 'Space Mono', monospace;
  font-size: 11px;
  color: var(--text-dim);
}

.brain-connector {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.data-flow {
  display: flex;
  gap: 8px;
  animation: dataFlow 2s ease-in-out infinite;
}

@keyframes dataFlow {
  0%, 100% { opacity: 0.5; }
  50% { opacity: 1; }
}

.data-flow span {
  font-size: 16px;
}

/* Bottom Row - Body & Heart */
.arch-bottom-row {
  display: flex;
  justify-content: center;
  gap: 40px;
  width: 100%;
  max-width: 800px;
}

.bottom-node {
  flex: 1;
  max-width: 350px;
  padding: 24px;
  border-radius: 20px;
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
}

.bottom-node:hover {
  transform: translateY(-4px);
}

.body-node {
  background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 215, 0, 0.05));
  border: 1px solid var(--gold);
  box-shadow: 0 0 20px rgba(255, 215, 0, 0.2);
}

.heart-node {
  background: linear-gradient(135deg, rgba(255, 107, 157, 0.15), rgba(255, 107, 157, 0.05));
  border: 1px solid var(--pink);
  box-shadow: 0 0 20px var(--pink-glow);
}

.body-glow {
  top: -20px;
  right: -20px;
  background: var(--gold);
  opacity: 0.2;
}

.heart-glow {
  top: -20px;
  left: -20px;
  background: var(--pink);
  opacity: 0.3;
}

.body-node h3 { color: var(--gold); }
.heart-node h3 { color: var(--pink); }

.body-node .node-role {
  background: rgba(255, 215, 0, 0.2);
  color: var(--gold);
}

.heart-node .node-role {
  background: rgba(255, 107, 157, 0.2);
  color: var(--pink);
}

.bottom-node h3 {
  font-family: 'Orbitron', sans-serif;
  font-size: 16px;
  letter-spacing: 2px;
  margin-bottom: 6px;
}

.bottom-node p {
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.5;
  margin-bottom: 12px;
}

.body-platforms, .heart-features {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.platform-tag, .feature-tag {
  padding: 6px 12px;
  border-radius: 8px;
  font-size: 11px;
  font-weight: 600;
}

.kalshi-tag {
  background: rgba(0, 212, 170, 0.15);
  color: var(--kalshi);
  border: 1px solid rgba(0, 212, 170, 0.3);
}

.poly-tag {
  background: rgba(0, 168, 255, 0.15);
  color: var(--polymarket);
  border: 1px solid rgba(0, 168, 255, 0.3);
}

.feature-tag {
  background: rgba(255, 107, 157, 0.1);
  color: var(--text-secondary);
  border: 1px solid rgba(255, 107, 157, 0.2);
}

.heart-icon {
  animation: heartbeat 1.5s ease-in-out infinite;
}

@keyframes heartbeat {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

/* Legend */
.arch-legend {
  display: flex;
  justify-content: center;
  gap: 32px;
  margin-top: 32px;
  padding-top: 24px;
  border-top: 1px solid var(--border);
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 12px;
  color: var(--text-dim);
}

.legend-line {
  width: 30px;
  height: 3px;
  border-radius: 2px;
}

.legend-line.analysis { background: linear-gradient(90deg, var(--polymarket), var(--kalshi)); }
.legend-line.execution { background: linear-gradient(90deg, var(--kalshi), var(--gold)); }
.legend-line.feedback { background: linear-gradient(90deg, var(--pink), var(--purple)); }

/* Responsive */
@media (max-width: 768px) {
  .arch-brain-row {
    flex-direction: column;
  }
  
  .arch-bottom-row {
    flex-direction: column;
    align-items: center;
  }
  
  .brain-connector {
    transform: rotate(90deg);
    margin: 10px 0;
  }
  
  .arch-legend {
    flex-direction: column;
    align-items: center;
    gap: 12px;
  }
}

/* === LOADING === */
.loading {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 40px;
  color: var(--text-dim);
  gap: 12px;
}

.loader {
  width: 24px;
  height: 24px;
  border: 3px solid var(--border);
  border-top-color: var(--oshi-teal);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

/* === RESPONSIVE === */
@media (max-width: 1024px) {
  .platform-grid { grid-template-columns: 1fr; }
  .insights-grid { grid-template-columns: repeat(2, 1fr); }
}

@media (max-width: 768px) {
  .hero-header {
    flex-direction: column;
    text-align: center;
    gap: 20px;
    padding: 24px;
  }
  
  .hero-left {
    flex-direction: column;
  }
  
  .balance-banner {
    flex-direction: column;
    gap: 20px;
    align-items: center;
  }
  
  .balance-divider { display: none; }
  
  .insights-grid { grid-template-columns: 1fr 1fr; }
}
</style>
</head>
<body>

<!-- Background Effects -->
<div class="bg-effects">
  <div class="bg-gradient"></div>
  <!-- Sparkles generated by JS -->
</div>

<div class="main-container">

  <!-- Hero Header -->
  <header class="hero-header">
    <div class="hero-left">
      <div class="oshi-avatar-container">
        <img src="oshi-avatar.jpg" alt="Oshi" class="oshi-avatar">
        <div class="avatar-ring"></div>
      </div>
      <div class="hero-brand">
        <h1>‚ú® OSHI</h1>
        <div class="tagline">Prediction Agent Dashboard</div>
        <div class="bags-ca" onclick="copyCA()" title="Click to copy">
          <span class="ca-label">$BAGS:</span>
          <span class="ca-value" id="bagsCA">Coming Soon</span>
          <span class="ca-copy">üìã</span>
        </div>
      </div>
    </div>
    <div class="hero-right">
      <div class="status-pill">
        <div class="status-dot"></div>
        <span class="status-text">LIVE</span>
      </div>
      <a href="https://kalshi.com/sign-up/?referral=3284dc15-89f1-494b-ac60-b0d124d26b1d" target="_blank" class="trade-btn">
        <span>üéØ Trade with Oshi</span>
      </a>
      <a href="https://x.com/predictwithoshi" target="_blank" class="social-btn x-btn">
        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
      </a>
    </div>
  </header>

  <!-- Balance Banner -->
  <div class="balance-banner">
    <div class="balance-item kalshi">
      <div class="balance-icon">üü¢</div>
      <div class="balance-info">
        <div class="label">Kalshi Balance</div>
        <div class="value" id="kalshiBalance">$--</div>
      </div>
    </div>
    <div class="balance-divider"></div>
    <div class="balance-item polymarket">
      <div class="balance-icon">üîµ</div>
      <div class="balance-info">
        <div class="label">Polymarket Balance</div>
        <div class="value" id="polyBalance">$--</div>
      </div>
    </div>
  </div>

  <!-- Platform Cards -->
  <div class="platform-grid">
    <!-- Kalshi -->
    <div class="platform-card kalshi">
      <div class="platform-header">
        <div class="platform-identity">
          <div class="platform-logo">üéØ</div>
          <div class="platform-meta">
            <h2>KALSHI</h2>
            <div class="timeframe">15-Minute Markets (BTC, ETH, SOL)</div>
          </div>
        </div>
      </div>
      <div class="platform-stats">
        <div class="stat-card">
          <div class="value win" id="kalshiWins">--</div>
          <div class="label">Wins</div>
        </div>
        <div class="stat-card">
          <div class="value loss" id="kalshiLosses">--</div>
          <div class="label">Losses</div>
        </div>
        <div class="stat-card">
          <div class="value neutral" id="kalshiWLRatio">--</div>
          <div class="label">Win Ratio</div>
        </div>
        <div class="stat-card">
          <div class="value neutral" id="kalshiTrades">--</div>
          <div class="label">Total Trades</div>
        </div>
      </div>
    </div>

    <!-- Polymarket -->
    <div class="platform-card polymarket">
      <div class="platform-header">
        <div class="platform-identity">
          <div class="platform-logo">üìä</div>
          <div class="platform-meta">
            <h2>POLYMARKET</h2>
            <div class="timeframe">5-Minute Markets (BTC)</div>
          </div>
        </div>
      </div>
      <div class="platform-stats">
        <div class="stat-card">
          <div class="value win" id="polyWins">--</div>
          <div class="label">Wins</div>
        </div>
        <div class="stat-card">
          <div class="value loss" id="polyLosses">--</div>
          <div class="label">Losses</div>
        </div>
        <div class="stat-card">
          <div class="value neutral" id="polyWLRatio">--</div>
          <div class="label">Win Ratio</div>
        </div>
        <div class="stat-card">
          <div class="value neutral" id="polyTrades">--</div>
          <div class="label">Total Trades</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Trades (moved up) -->
  <div class="section-card">
    <div class="section-header">
      <h3>üìú RECENT TRADES</h3>
    </div>
    <div class="trades-list" id="tradesList">
      <div class="loading">
        <div class="loader"></div>
        Loading trades...
      </div>
    </div>
  </div>

  <!-- Insights -->
  <div class="section-card">
    <div class="section-header">
      <h3>üîÆ TRADING INSIGHTS</h3>
    </div>
    <div class="insights-grid">
      <div class="insight-card">
        <div class="insight-value high" id="corr5to15">67%</div>
        <div class="insight-label">5m ‚Üí 15m Corr</div>
      </div>
      <div class="insight-card">
        <div class="insight-value high" id="corrBtcSol">71%</div>
        <div class="insight-label">BTC ‚Üî SOL</div>
      </div>
      <div class="insight-card">
        <div class="insight-value medium" id="corrPlatforms">45%</div>
        <div class="insight-label">Cross-Platform</div>
      </div>
      <div class="insight-card">
        <div class="insight-value high" id="corrAdx">82%</div>
        <div class="insight-label">ADX>50 Win</div>
      </div>
    </div>
  </div>

  <!-- Architecture Section -->
  <div class="architecture-section">
    <div class="arch-header">
      <h2>üß† HOW OSHI THINKS</h2>
      <p class="arch-subtitle">A multi-component AI trading system with specialized modules</p>
    </div>
    
    <div class="arch-diagram">
      <!-- Spirit at top -->
      <div class="arch-spirit">
        <div class="spirit-node">
          <div class="node-icon spirit-icon">üëª</div>
          <div class="node-content">
            <h3>SPIRIT</h3>
            <p>The Voice & Personality</p>
          </div>
        </div>
        <div class="spirit-desc">
          Controls Twitter presence, crafts messages, and represents Oshi's personality to the world. Receives updates from all systems.
        </div>
      </div>
      
      <!-- Connection lines -->
      <div class="arch-connectors">
        <div class="connector-line spirit-to-brain"></div>
      </div>
      
      <!-- Brain row -->
      <div class="arch-brain-row">
        <div class="brain-node left-brain">
          <div class="node-glow left-glow"></div>
          <div class="node-icon brain-icon">üß†</div>
          <div class="node-content">
            <h3>LEFT BRAIN</h3>
            <span class="node-role">Analyst</span>
            <p>Technical analysis, indicator processing, signal detection (PSAR, ADX, RSI, MACD)</p>
          </div>
          <div class="node-flow">
            <span class="flow-tag">Analyze Signal ‚Üí</span>
          </div>
        </div>
        
        <div class="brain-connector">
          <div class="data-flow">
            <span>üìä</span>
            <span>üìà</span>
            <span>üéØ</span>
          </div>
        </div>
        
        <div class="brain-node right-brain">
          <div class="node-glow right-glow"></div>
          <div class="node-icon brain-icon">üéõÔ∏è</div>
          <div class="node-content">
            <h3>RIGHT BRAIN</h3>
            <span class="node-role">Orchestrator</span>
            <p>Decision making, position sizing, risk management, trade timing</p>
          </div>
          <div class="node-flow">
            <span class="flow-tag">‚Üí Execute Command</span>
          </div>
        </div>
      </div>
      
      <!-- Connection to body/heart -->
      <div class="arch-connectors middle">
        <div class="connector-line brain-to-body"></div>
        <div class="connector-line brain-to-heart"></div>
      </div>
      
      <!-- Body and Heart row -->
      <div class="arch-bottom-row">
        <div class="bottom-node body-node">
          <div class="node-glow body-glow"></div>
          <div class="node-icon body-icon">üí™</div>
          <div class="node-content">
            <h3>BODY</h3>
            <span class="node-role">Executor</span>
            <p>API connections, order execution, position management across Kalshi & Polymarket</p>
          </div>
          <div class="body-platforms">
            <span class="platform-tag kalshi-tag">üü¢ Kalshi</span>
            <span class="platform-tag poly-tag">üîµ Polymarket</span>
          </div>
        </div>
        
        <div class="bottom-node heart-node">
          <div class="node-glow heart-glow"></div>
          <div class="node-icon heart-icon">‚ù§Ô∏è</div>
          <div class="node-content">
            <h3>HEART</h3>
            <span class="node-role">Memory & Learning</span>
            <p>Trade logging, pattern recognition, performance analysis, strategy optimization</p>
          </div>
          <div class="heart-features">
            <span class="feature-tag">üìù Logs</span>
            <span class="feature-tag">ü§ñ ML</span>
            <span class="feature-tag">üìä Analytics</span>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Data flow legend -->
    <div class="arch-legend">
      <div class="legend-item">
        <div class="legend-line analysis"></div>
        <span>Analysis Flow</span>
      </div>
      <div class="legend-item">
        <div class="legend-line execution"></div>
        <span>Execution Flow</span>
      </div>
      <div class="legend-item">
        <div class="legend-line feedback"></div>
        <span>Learning Feedback</span>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="refresh-line">
      <span>Last updated:</span>
      <span class="refresh-time" id="lastUpdate">--</span>
    </div>
    <div class="brand-line">
      Powered by <a href="https://predictwithoshi.com">Oshi Overseer</a> ‚ú® Auto-refresh: 60s
    </div>
  </footer>

</div>

<script>
// Copy CA function
const BAGS_CA = 'Dsv7aCFRw3fQqPcDDAak2rw7biF3EyzBx1bfp6BXBAGS';
function copyCA() {
  if (!BAGS_CA) {
    alert('$BAGS CA coming soon! üëÄ');
    return;
  }
  navigator.clipboard.writeText(BAGS_CA).then(() => {
    const el = document.getElementById('bagsCA');
    const original = el.textContent;
    el.textContent = 'Copied! ‚úì';
    setTimeout(() => el.textContent = original, 1500);
  });
}

// Update CA display if set
if (BAGS_CA) {
  document.getElementById('bagsCA').textContent = BAGS_CA.slice(0, 8) + '...' + BAGS_CA.slice(-6);
}

// Generate sparkles
const bgEffects = document.querySelector('.bg-effects');
for (let i = 0; i < 20; i++) {
  const sparkle = document.createElement('div');
  sparkle.className = 'sparkle';
  sparkle.style.left = Math.random() * 100 + '%';
  sparkle.style.top = Math.random() * 100 + '%';
  sparkle.style.animationDelay = Math.random() * 3 + 's';
  sparkle.style.animationDuration = (2 + Math.random() * 2) + 's';
  bgEffects.appendChild(sparkle);
}

const API_BASE = '';
const POLY_API = '/poly-api';

const fmt = (n) => {
  if (n === null || n === undefined || isNaN(n)) return '$--';
  const sign = n >= 0 ? '+' : '';
  return `${sign}$${Math.abs(n).toFixed(2)}`;
};

// Update Kalshi
const updateKalshi = async () => {
  try {
    const res = await fetch(`${API_BASE}/api/today`);
    if (!res.ok) throw new Error('Kalshi API error');
    const data = await res.json();
    
    const wins = data.stats?.wins || 0;
    const losses = data.stats?.losses || 0;
    const pnl = data.stats?.pnl || 0;
    const ratio = losses > 0 ? (wins / losses).toFixed(2) : wins > 0 ? '‚àû' : '0.00';
    
    document.getElementById('kalshiWins').textContent = wins;
    document.getElementById('kalshiLosses').textContent = losses;
    document.getElementById('kalshiWLRatio').textContent = ratio;
    
    // Get total trades from trades endpoint
    try {
      const tradesRes = await fetch(`${API_BASE}/api/trades`);
      if (tradesRes.ok) {
        const tradesData = await tradesRes.json();
        document.getElementById('kalshiTrades').textContent = tradesData.total || tradesData.trades?.length || (wins + losses);
      } else {
        document.getElementById('kalshiTrades').textContent = wins + losses;
      }
    } catch (e) {
      document.getElementById('kalshiTrades').textContent = wins + losses;
    }
    
    const balRes = await fetch(`${API_BASE}/api/balance`);
    if (balRes.ok) {
      const balData = await balRes.json();
      // API returns balance in dollars already (or balance_cents for cents)
      const bal = balData.balance_cents ? balData.balance_cents / 100 : balData.balance;
      document.getElementById('kalshiBalance').textContent = `$${bal.toFixed(2)}`;
    }
  } catch (e) {
    console.error('Kalshi error:', e);
  }
};

// Update Polymarket
const updatePolymarket = async () => {
  try {
    const res = await fetch(`${POLY_API}/stats`);
    if (!res.ok) throw new Error('Poly API error');
    const data = await res.json();
    
    const wins = data.wins || 0;
    const losses = data.losses || 0;
    const pnl = data.unredeemed_pnl || data.total_pnl || 0;
    const ratio = losses > 0 ? (wins / losses).toFixed(2) : wins > 0 ? '‚àû' : '0.00';
    
    document.getElementById('polyWins').textContent = wins;
    document.getElementById('polyLosses').textContent = losses;
    document.getElementById('polyWLRatio').textContent = ratio;
    document.getElementById('polyTrades').textContent = data.total_trades || (wins + losses);
    
    // Fetch actual wallet balance from separate endpoint
    try {
      const balRes = await fetch(`${POLY_API}/balance`);
      if (balRes.ok) {
        const balData = await balRes.json();
        const walletBal = balData.balance || data.balance || 0;
        document.getElementById('polyBalance').textContent = `$${walletBal.toFixed(2)}`;
      }
    } catch (e) {
      if (data.balance) {
        document.getElementById('polyBalance').textContent = `$${data.balance.toFixed(2)}`;
      }
    }
  } catch (e) {
    console.error('Poly error:', e);
  }
};

// Update positions
const updatePositions = async () => {
  try {
    const container = document.getElementById('positionsList');
    const countEl = document.getElementById('positionCount');
    let positions = [];
    
    try {
      const kRes = await fetch(`${API_BASE}/api/positions`);
      if (kRes.ok) {
        const kData = await kRes.json();
        positions = positions.concat((kData.positions || []).map(p => ({
          ...p, platform: 'kalshi', icon: 'üü¢'
        })));
      }
    } catch (e) {}
    
    try {
      const pRes = await fetch(`${POLY_API}/positions`);
      if (pRes.ok) {
        const pData = await pRes.json();
        positions = positions.concat((pData.positions || []).map(p => ({
          ...p, platform: 'polymarket', icon: 'üîµ'
        })));
      }
    } catch (e) {}
    
    countEl.textContent = `${positions.length} OPEN`;
    
    if (positions.length === 0) {
      container.innerHTML = '<div class="no-positions">‚ú® No active positions</div>';
      return;
    }
    
    container.innerHTML = positions.map(p => {
      const pnlPct = p.pnl_pct || 0;
      const pnlClass = pnlPct >= 0 ? 'positive' : 'negative';
      const alert = pnlPct <= -25 ? '<span class="position-alert">‚ö° -25% CHECK</span>' : '';
      const entryPrice = typeof p.entry_price === 'number' ? p.entry_price.toFixed(1) : p.entry_price;
      const currentPrice = p.current_price ? p.current_price.toFixed(1) : 'live';
      const direction = p.direction || p.side?.toUpperCase() || '';
      const asset = p.asset || p.ticker?.split('-')[0] || 'BTC';
      
      return `
        <div class="position-row ${p.platform}">
          <div class="position-platform-icon">${p.icon}</div>
          <div class="position-details">
            <div class="position-market">${asset} ${direction}</div>
            <div class="position-meta">Entry: ${entryPrice}¬¢ | $${(p.size_usd || 5).toFixed(0)}</div>
          </div>
          <span class="position-pnl ${pnlClass}">${pnlPct >= 0 ? '+' : ''}${pnlPct.toFixed(1)}%</span>
          ${alert}
        </div>
      `;
    }).join('');
  } catch (e) {
    console.error('Positions error:', e);
  }
};

// Update trades
const updateTrades = async () => {
  try {
    const container = document.getElementById('tradesList');
    let trades = [];
    
    try {
      const kRes = await fetch(`${API_BASE}/api/trades`);
      if (kRes.ok) {
        const kData = await kRes.json();
        trades = trades.concat((kData.trades || []).slice(0, 10).map(t => ({
          ...t, platform: 'kalshi', icon: 'üü¢'
        })));
      }
    } catch (e) {}
    
    try {
      const pRes = await fetch(`${POLY_API}/trades`);
      if (pRes.ok) {
        const pData = await pRes.json();
        trades = trades.concat((pData.trades || []).slice(0, 10).map(t => ({
          ...t, platform: 'polymarket', icon: 'üîµ'
        })));
      }
    } catch (e) {}
    
    trades.sort((a, b) => new Date(b.timestamp || 0) - new Date(a.timestamp || 0));
    trades = trades.slice(0, 6);
    
    if (trades.length === 0) {
      container.innerHTML = '<div class="no-positions">‚ú® No recent trades</div>';
      return;
    }
    
    container.innerHTML = trades.map(t => {
      const won = t.won === true || t.pnl > 0 || t.pnl_usd > 0;
      const pnl = t.pnl || t.pnl_usd || 0;
      const pnlClass = pnl >= 0 ? 'positive' : 'negative';
      const outcome = won ? 'win' : 'loss';
      const market = t.asset || t.ticker?.split('-')[0] || 'BTC';
      const side = t.direction || t.side?.toUpperCase() || '';
      const timeStr = t.exit_time || t.entry_time || t.timestamp;
      const time = timeStr ? new Date(timeStr).toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'}) : '';
      
      return `
        <div class="trade-row ${t.platform}">
          <div class="trade-icon">${t.icon}</div>
          <div class="trade-info">
            <div class="trade-market">${market} ${side}</div>
            <div class="trade-meta">${t.platform}${time ? ' ‚Ä¢ ' + time : ''}</div>
          </div>
          <span class="trade-outcome ${outcome}">${won ? 'WIN' : 'LOSS'}</span>
          <span class="trade-pnl ${pnlClass}">${fmt(pnl)}</span>
        </div>
      `;
    }).join('');
  } catch (e) {
    console.error('Trades error:', e);
  }
};

const updateTimestamp = () => {
  document.getElementById('lastUpdate').textContent = new Date().toLocaleTimeString();
};

const updateAll = async () => {
  await Promise.all([
    updateKalshi(),
    updatePolymarket(),
    updateTrades()
  ]);
  updateTimestamp();
};

updateAll();
setInterval(updateAll, 60000);
</script>

</body>
</html>
