<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‚ú® Oshi ‚Äî Prediction Agent Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&family=Orbitron:wght@400;500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
:root {
  /* Oshi's Teal Theme */
  --oshi-teal: #00d4aa;
  --oshi-teal-light: #00ffd0;
  --oshi-teal-glow: rgba(0, 212, 170, 0.4);
  
  /* Platform Colors */
  --kalshi: #00d4aa;
  --kalshi-glow: rgba(0, 212, 170, 0.3);
  --polymarket: #00a8ff;
  --polymarket-glow: rgba(0, 168, 255, 0.3);
  
  /* Anime Accent Colors */
  --pink: #ff6b9d;
  --pink-glow: rgba(255, 107, 157, 0.3);
  --purple: #a855f7;
  --purple-glow: rgba(168, 85, 247, 0.3);
  --gold: #ffd700;
  
  /* Status */
  --win: #00d4aa;
  --loss: #ff5c8a;
  --neutral: #8892b0;
  
  /* Backgrounds */
  --bg-deep: #0a0e1a;
  --bg-card: rgba(15, 20, 35, 0.95);
  --bg-glass: rgba(255, 255, 255, 0.03);
  --border: rgba(0, 212, 170, 0.15);
  --border-glow: rgba(0, 212, 170, 0.4);
  
  /* Text */
  --text-primary: #f0f4ff;
  --text-secondary: #8892b0;
  --text-dim: #5a6480;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: var(--bg-deep);
  color: var(--text-primary);
  font-family: 'Quicksand', sans-serif;
  min-height: 100vh;
  overflow-x: hidden;
  position: relative;
}

/* === ANIMATED BACKGROUND === */
.bg-effects {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 0;
}

.bg-gradient {
  position: absolute;
  width: 100%;
  height: 100%;
  background: 
    radial-gradient(ellipse at 20% 20%, rgba(0, 212, 170, 0.08) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 80%, rgba(0, 168, 255, 0.08) 0%, transparent 50%),
    radial-gradient(ellipse at 50% 50%, rgba(168, 85, 247, 0.05) 0%, transparent 60%);
}

.sparkle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: white;
  border-radius: 50%;
  animation: sparkle 3s ease-in-out infinite;
  box-shadow: 0 0 10px 2px rgba(255, 255, 255, 0.5);
}

@keyframes sparkle {
  0%, 100% { opacity: 0; transform: scale(0); }
  50% { opacity: 1; transform: scale(1); }
}

.main-container {
  position: relative;
  z-index: 1;
  max-width: 1400px;
  margin: 0 auto;
  padding: 20px;
}

/* === HERO HEADER === */
.hero-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 30px 40px;
  margin-bottom: 30px;
  background: var(--bg-card);
  border-radius: 24px;
  border: 1px solid var(--border);
  position: relative;
  overflow: hidden;
}

.hero-header::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--kalshi), var(--purple), var(--polymarket));
}

.hero-header::after {
  content: '';
  position: absolute;
  top: -50%;
  right: -10%;
  width: 400px;
  height: 400px;
  background: radial-gradient(circle, var(--oshi-teal-glow) 0%, transparent 70%);
  pointer-events: none;
}

.hero-left {
  display: flex;
  align-items: center;
  gap: 24px;
  z-index: 2;
}

.oshi-avatar-container {
  position: relative;
}

.oshi-avatar {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid var(--oshi-teal);
  box-shadow: 
    0 0 20px var(--oshi-teal-glow),
    0 0 40px var(--oshi-teal-glow),
    inset 0 0 20px rgba(0, 212, 170, 0.1);
  animation: avatarGlow 3s ease-in-out infinite;
}

@keyframes avatarGlow {
  0%, 100% { box-shadow: 0 0 20px var(--oshi-teal-glow), 0 0 40px var(--oshi-teal-glow); }
  50% { box-shadow: 0 0 30px var(--oshi-teal-glow), 0 0 60px var(--oshi-teal-glow); }
}

.avatar-ring {
  position: absolute;
  top: -5px;
  left: -5px;
  right: -5px;
  bottom: -5px;
  border: 2px solid transparent;
  border-top-color: var(--pink);
  border-radius: 50%;
  animation: spin 4s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.hero-brand {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.hero-brand h1 {
  font-family: 'Orbitron', sans-serif;
  font-size: 36px;
  font-weight: 700;
  letter-spacing: 4px;
  background: linear-gradient(135deg, var(--oshi-teal-light), var(--oshi-teal), var(--polymarket));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 0 30px var(--oshi-teal-glow);
}

.hero-brand .tagline {
  font-size: 14px;
  color: var(--text-secondary);
  letter-spacing: 3px;
  text-transform: uppercase;
}

.hero-right {
  display: flex;
  align-items: center;
  gap: 20px;
  z-index: 2;
}

.status-pill {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 24px;
  background: linear-gradient(135deg, rgba(0, 212, 170, 0.15), rgba(0, 168, 255, 0.15));
  border-radius: 50px;
  border: 1px solid var(--border);
}

.status-dot {
  width: 10px;
  height: 10px;
  background: var(--oshi-teal);
  border-radius: 50%;
  animation: pulse 2s ease-in-out infinite;
  box-shadow: 0 0 10px var(--oshi-teal);
}

@keyframes pulse {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.2); opacity: 0.7; }
}

.status-text {
  font-family: 'Space Mono', monospace;
  font-size: 13px;
  color: var(--oshi-teal);
  letter-spacing: 1px;
}

.version-badge {
  font-family: 'Space Mono', monospace;
  padding: 8px 16px;
  background: var(--bg-glass);
  border: 1px solid var(--purple);
  border-radius: 8px;
  font-size: 12px;
  color: var(--purple);
}

/* === BALANCE BANNER === */
.balance-banner {
  display: flex;
  justify-content: center;
  gap: 60px;
  padding: 24px 40px;
  margin-bottom: 30px;
  background: var(--bg-card);
  border-radius: 20px;
  border: 1px solid var(--border);
  position: relative;
}

.balance-item {
  display: flex;
  align-items: center;
  gap: 16px;
}

.balance-icon {
  width: 50px;
  height: 50px;
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
}

.balance-item.kalshi .balance-icon {
  background: linear-gradient(135deg, rgba(0, 212, 170, 0.2), rgba(0, 212, 170, 0.05));
  border: 1px solid var(--kalshi);
  box-shadow: 0 0 20px var(--kalshi-glow);
}

.balance-item.polymarket .balance-icon {
  background: linear-gradient(135deg, rgba(0, 168, 255, 0.2), rgba(0, 168, 255, 0.05));
  border: 1px solid var(--polymarket);
  box-shadow: 0 0 20px var(--polymarket-glow);
}

.balance-info .label {
  font-size: 12px;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 4px;
}

.balance-info .value {
  font-family: 'Space Mono', monospace;
  font-size: 26px;
  font-weight: 700;
}

.balance-item.kalshi .value { color: var(--kalshi); text-shadow: 0 0 20px var(--kalshi-glow); }
.balance-item.polymarket .value { color: var(--polymarket); text-shadow: 0 0 20px var(--polymarket-glow); }

.balance-divider {
  width: 1px;
  background: linear-gradient(180deg, transparent, var(--border), transparent);
}

/* === PLATFORM GRID === */
.platform-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
  margin-bottom: 30px;
}

.platform-card {
  background: var(--bg-card);
  border-radius: 24px;
  padding: 28px;
  border: 1px solid var(--border);
  position: relative;
  overflow: hidden;
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.platform-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
}

.platform-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  border-radius: 4px 4px 0 0;
}

.platform-card.kalshi::before {
  background: linear-gradient(90deg, var(--kalshi), var(--oshi-teal-light));
  box-shadow: 0 0 20px var(--kalshi-glow);
}

.platform-card.polymarket::before {
  background: linear-gradient(90deg, var(--polymarket), #00d4ff);
  box-shadow: 0 0 20px var(--polymarket-glow);
}

.platform-card::after {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  width: 150px;
  height: 150px;
  border-radius: 50%;
  pointer-events: none;
}

.platform-card.kalshi::after {
  background: radial-gradient(circle, var(--kalshi-glow) 0%, transparent 70%);
}

.platform-card.polymarket::after {
  background: radial-gradient(circle, var(--polymarket-glow) 0%, transparent 70%);
}

.platform-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
  position: relative;
  z-index: 2;
}

.platform-identity {
  display: flex;
  align-items: center;
  gap: 16px;
}

.platform-logo {
  width: 56px;
  height: 56px;
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 26px;
}

.kalshi .platform-logo {
  background: linear-gradient(135deg, rgba(0, 212, 170, 0.25), rgba(0, 212, 170, 0.1));
  border: 2px solid var(--kalshi);
  box-shadow: 0 0 20px var(--kalshi-glow), inset 0 0 20px var(--kalshi-glow);
}

.polymarket .platform-logo {
  background: linear-gradient(135deg, rgba(0, 168, 255, 0.25), rgba(0, 168, 255, 0.1));
  border: 2px solid var(--polymarket);
  box-shadow: 0 0 20px var(--polymarket-glow), inset 0 0 20px var(--polymarket-glow);
}

.platform-meta h2 {
  font-family: 'Orbitron', sans-serif;
  font-size: 18px;
  letter-spacing: 3px;
}

.kalshi .platform-meta h2 { color: var(--kalshi); }
.polymarket .platform-meta h2 { color: var(--polymarket); }

.platform-meta .timeframe {
  font-size: 13px;
  color: var(--text-dim);
  margin-top: 2px;
}

.platform-stats {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
  position: relative;
  z-index: 2;
}

.stat-card {
  background: var(--bg-glass);
  border-radius: 16px;
  padding: 20px;
  text-align: center;
  border: 1px solid rgba(255, 255, 255, 0.05);
  transition: all 0.3s ease;
}

.stat-card:hover {
  background: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.1);
}

.stat-card .value {
  font-family: 'Space Mono', monospace;
  font-size: 32px;
  font-weight: 700;
  margin-bottom: 8px;
}

.stat-card .value.win { color: var(--win); text-shadow: 0 0 15px var(--kalshi-glow); }
.stat-card .value.loss { color: var(--loss); text-shadow: 0 0 15px var(--pink-glow); }
.stat-card .value.neutral { color: var(--neutral); }
.stat-card .value.positive { color: var(--win); text-shadow: 0 0 15px var(--kalshi-glow); }
.stat-card .value.negative { color: var(--loss); text-shadow: 0 0 15px var(--pink-glow); }

.stat-card .label {
  font-size: 11px;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 2px;
}

/* === ACTIVE POSITIONS === */
.section-card {
  background: var(--bg-card);
  border-radius: 24px;
  padding: 28px;
  margin-bottom: 24px;
  border: 1px solid var(--border);
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--border);
}

.section-header h3 {
  font-family: 'Orbitron', sans-serif;
  font-size: 14px;
  letter-spacing: 3px;
  color: var(--text-secondary);
  display: flex;
  align-items: center;
  gap: 10px;
}

.section-badge {
  background: linear-gradient(135deg, var(--oshi-teal-glow), var(--purple-glow));
  padding: 6px 14px;
  border-radius: 20px;
  font-size: 12px;
  font-family: 'Space Mono', monospace;
  color: var(--oshi-teal);
  border: 1px solid var(--oshi-teal);
}

.positions-grid {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.position-row {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px 20px;
  background: var(--bg-glass);
  border-radius: 16px;
  border: 1px solid transparent;
  transition: all 0.3s ease;
}

.position-row:hover {
  background: rgba(255, 255, 255, 0.05);
}

.position-row.kalshi { border-left: 3px solid var(--kalshi); }
.position-row.polymarket { border-left: 3px solid var(--polymarket); }

.position-platform-icon {
  width: 40px;
  height: 40px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
}

.position-row.kalshi .position-platform-icon {
  background: rgba(0, 212, 170, 0.15);
}

.position-row.polymarket .position-platform-icon {
  background: rgba(0, 168, 255, 0.15);
}

.position-details {
  flex: 1;
}

.position-market {
  font-weight: 600;
  font-size: 15px;
  margin-bottom: 4px;
}

.position-meta {
  font-size: 12px;
  color: var(--text-dim);
  font-family: 'Space Mono', monospace;
}

.position-pnl {
  font-family: 'Space Mono', monospace;
  font-size: 16px;
  font-weight: 700;
  padding: 8px 16px;
  border-radius: 10px;
}

.position-pnl.positive {
  background: rgba(0, 212, 170, 0.15);
  color: var(--win);
}

.position-pnl.negative {
  background: rgba(255, 92, 138, 0.15);
  color: var(--loss);
}

.position-alert {
  padding: 6px 12px;
  border-radius: 8px;
  font-size: 11px;
  font-weight: 600;
  background: rgba(255, 107, 157, 0.2);
  color: var(--pink);
  animation: alertPulse 2s ease-in-out infinite;
}

@keyframes alertPulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

.no-positions {
  text-align: center;
  padding: 40px;
  color: var(--text-dim);
  font-style: italic;
}

/* === INSIGHTS GRID === */
.insights-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 16px;
}

.insight-card {
  background: var(--bg-glass);
  border-radius: 16px;
  padding: 20px;
  text-align: center;
  border: 1px solid var(--border);
  transition: all 0.3s ease;
}

.insight-card:hover {
  transform: translateY(-4px);
  border-color: var(--oshi-teal);
}

.insight-value {
  font-family: 'Space Mono', monospace;
  font-size: 28px;
  font-weight: 700;
  margin-bottom: 8px;
}

.insight-value.high { color: var(--win); }
.insight-value.medium { color: var(--gold); }
.insight-value.low { color: var(--loss); }

.insight-label {
  font-size: 10px;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 1.5px;
}

/* === RECENT TRADES === */
.trades-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.trade-row {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px 20px;
  background: var(--bg-glass);
  border-radius: 16px;
  transition: all 0.3s ease;
}

.trade-row:hover {
  background: rgba(255, 255, 255, 0.05);
}

.trade-icon {
  width: 44px;
  height: 44px;
  border-radius: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
}

.trade-row.kalshi .trade-icon { background: rgba(0, 212, 170, 0.15); }
.trade-row.polymarket .trade-icon { background: rgba(0, 168, 255, 0.15); }

.trade-info {
  flex: 1;
}

.trade-market {
  font-weight: 600;
  font-size: 15px;
  margin-bottom: 3px;
}

.trade-meta {
  font-size: 12px;
  color: var(--text-dim);
}

.trade-outcome {
  padding: 6px 14px;
  border-radius: 10px;
  font-size: 12px;
  font-weight: 700;
  letter-spacing: 1px;
}

.trade-outcome.win {
  background: linear-gradient(135deg, rgba(0, 212, 170, 0.2), rgba(0, 212, 170, 0.1));
  color: var(--win);
  border: 1px solid var(--win);
}

.trade-outcome.loss {
  background: linear-gradient(135deg, rgba(255, 92, 138, 0.2), rgba(255, 92, 138, 0.1));
  color: var(--loss);
  border: 1px solid var(--loss);
}

.trade-pnl {
  font-family: 'Space Mono', monospace;
  font-size: 16px;
  font-weight: 700;
  min-width: 90px;
  text-align: right;
}

.trade-pnl.positive { color: var(--win); }
.trade-pnl.negative { color: var(--loss); }

/* === FOOTER === */
.footer {
  text-align: center;
  padding: 30px;
  color: var(--text-dim);
}

.footer .refresh-line {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  margin-bottom: 10px;
}

.footer .refresh-time {
  font-family: 'Space Mono', monospace;
  color: var(--text-secondary);
}

.footer .brand-line {
  font-size: 13px;
}

.footer a {
  color: var(--oshi-teal);
  text-decoration: none;
  transition: color 0.2s;
}

.footer a:hover {
  color: var(--oshi-teal-light);
}

/* === LOADING === */
.loading {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 40px;
  color: var(--text-dim);
  gap: 12px;
}

.loader {
  width: 24px;
  height: 24px;
  border: 3px solid var(--border);
  border-top-color: var(--oshi-teal);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

/* === RESPONSIVE === */
@media (max-width: 1024px) {
  .platform-grid { grid-template-columns: 1fr; }
  .insights-grid { grid-template-columns: repeat(2, 1fr); }
}

@media (max-width: 768px) {
  .hero-header {
    flex-direction: column;
    text-align: center;
    gap: 20px;
    padding: 24px;
  }
  
  .hero-left {
    flex-direction: column;
  }
  
  .balance-banner {
    flex-direction: column;
    gap: 20px;
    align-items: center;
  }
  
  .balance-divider { display: none; }
  
  .insights-grid { grid-template-columns: 1fr 1fr; }
}
</style>
</head>
<body>

<!-- Background Effects -->
<div class="bg-effects">
  <div class="bg-gradient"></div>
  <!-- Sparkles generated by JS -->
</div>

<div class="main-container">

  <!-- Hero Header -->
  <header class="hero-header">
    <div class="hero-left">
      <div class="oshi-avatar-container">
        <img src="oshi-avatar.jpg" alt="Oshi" class="oshi-avatar">
        <div class="avatar-ring"></div>
      </div>
      <div class="hero-brand">
        <h1>‚ú® OSHI</h1>
        <div class="tagline">Prediction Agent Dashboard</div>
      </div>
    </div>
    <div class="hero-right">
      <div class="status-pill">
        <div class="status-dot"></div>
        <span class="status-text">LIVE</span>
      </div>
      <div class="version-badge">v9.0 + v1.2</div>
    </div>
  </header>

  <!-- Balance Banner -->
  <div class="balance-banner">
    <div class="balance-item kalshi">
      <div class="balance-icon">üü¢</div>
      <div class="balance-info">
        <div class="label">Kalshi Balance</div>
        <div class="value" id="kalshiBalance">$--</div>
      </div>
    </div>
    <div class="balance-divider"></div>
    <div class="balance-item polymarket">
      <div class="balance-icon">üîµ</div>
      <div class="balance-info">
        <div class="label">Polymarket Balance</div>
        <div class="value" id="polyBalance">$--</div>
      </div>
    </div>
  </div>

  <!-- Platform Cards -->
  <div class="platform-grid">
    <!-- Kalshi -->
    <div class="platform-card kalshi">
      <div class="platform-header">
        <div class="platform-identity">
          <div class="platform-logo">üéØ</div>
          <div class="platform-meta">
            <h2>KALSHI</h2>
            <div class="timeframe">15-Minute Markets</div>
          </div>
        </div>
      </div>
      <div class="platform-stats">
        <div class="stat-card">
          <div class="value win" id="kalshiWins">--</div>
          <div class="label">Wins</div>
        </div>
        <div class="stat-card">
          <div class="value loss" id="kalshiLosses">--</div>
          <div class="label">Losses</div>
        </div>
        <div class="stat-card">
          <div class="value neutral" id="kalshiWLRatio">--</div>
          <div class="label">Win Ratio</div>
        </div>
        <div class="stat-card">
          <div class="value" id="kalshiPnL">$--</div>
          <div class="label">Today P&L</div>
        </div>
      </div>
    </div>

    <!-- Polymarket -->
    <div class="platform-card polymarket">
      <div class="platform-header">
        <div class="platform-identity">
          <div class="platform-logo">üìä</div>
          <div class="platform-meta">
            <h2>POLYMARKET</h2>
            <div class="timeframe">5-Minute Markets</div>
          </div>
        </div>
      </div>
      <div class="platform-stats">
        <div class="stat-card">
          <div class="value win" id="polyWins">--</div>
          <div class="label">Wins</div>
        </div>
        <div class="stat-card">
          <div class="value loss" id="polyLosses">--</div>
          <div class="label">Losses</div>
        </div>
        <div class="stat-card">
          <div class="value neutral" id="polyWLRatio">--</div>
          <div class="label">Win Ratio</div>
        </div>
        <div class="stat-card">
          <div class="value" id="polyPnL">$--</div>
          <div class="label">Unredeemed</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Active Positions -->
  <div class="section-card">
    <div class="section-header">
      <h3>üìç ACTIVE POSITIONS</h3>
      <span class="section-badge" id="positionCount">0 OPEN</span>
    </div>
    <div class="positions-grid" id="positionsList">
      <div class="no-positions">‚ú® No active positions</div>
    </div>
  </div>

  <!-- Insights -->
  <div class="section-card">
    <div class="section-header">
      <h3>üîÆ TRADING INSIGHTS</h3>
    </div>
    <div class="insights-grid">
      <div class="insight-card">
        <div class="insight-value high" id="corr5to15">67%</div>
        <div class="insight-label">5m ‚Üí 15m Corr</div>
      </div>
      <div class="insight-card">
        <div class="insight-value high" id="corrBtcSol">71%</div>
        <div class="insight-label">BTC ‚Üî SOL</div>
      </div>
      <div class="insight-card">
        <div class="insight-value medium" id="corrPlatforms">45%</div>
        <div class="insight-label">Cross-Platform</div>
      </div>
      <div class="insight-card">
        <div class="insight-value high" id="corrAdx">82%</div>
        <div class="insight-label">ADX>50 Win</div>
      </div>
    </div>
  </div>

  <!-- Recent Trades -->
  <div class="section-card">
    <div class="section-header">
      <h3>üìú RECENT TRADES</h3>
    </div>
    <div class="trades-list" id="tradesList">
      <div class="loading">
        <div class="loader"></div>
        Loading trades...
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="refresh-line">
      <span>Last updated:</span>
      <span class="refresh-time" id="lastUpdate">--</span>
    </div>
    <div class="brand-line">
      Powered by <a href="https://predictwithoshi.com">Oshi Overseer</a> ‚ú® Auto-refresh: 60s
    </div>
  </footer>

</div>

<script>
// Generate sparkles
const bgEffects = document.querySelector('.bg-effects');
for (let i = 0; i < 20; i++) {
  const sparkle = document.createElement('div');
  sparkle.className = 'sparkle';
  sparkle.style.left = Math.random() * 100 + '%';
  sparkle.style.top = Math.random() * 100 + '%';
  sparkle.style.animationDelay = Math.random() * 3 + 's';
  sparkle.style.animationDuration = (2 + Math.random() * 2) + 's';
  bgEffects.appendChild(sparkle);
}

const API_BASE = '';
const POLY_API = '/poly-api';

const fmt = (n) => {
  if (n === null || n === undefined || isNaN(n)) return '$--';
  const sign = n >= 0 ? '+' : '';
  return `${sign}$${Math.abs(n).toFixed(2)}`;
};

// Update Kalshi
const updateKalshi = async () => {
  try {
    const res = await fetch(`${API_BASE}/api/today`);
    if (!res.ok) throw new Error('Kalshi API error');
    const data = await res.json();
    
    const wins = data.stats?.wins || 0;
    const losses = data.stats?.losses || 0;
    const pnl = data.stats?.pnl || 0;
    const ratio = losses > 0 ? (wins / losses).toFixed(2) : wins > 0 ? '‚àû' : '0.00';
    
    document.getElementById('kalshiWins').textContent = wins;
    document.getElementById('kalshiLosses').textContent = losses;
    document.getElementById('kalshiWLRatio').textContent = ratio;
    
    const pnlEl = document.getElementById('kalshiPnL');
    pnlEl.textContent = fmt(pnl);
    pnlEl.className = `value ${pnl >= 0 ? 'positive' : 'negative'}`;
    
    const balRes = await fetch(`${API_BASE}/api/balance`);
    if (balRes.ok) {
      const balData = await balRes.json();
      document.getElementById('kalshiBalance').textContent = `$${(balData.balance / 100).toFixed(2)}`;
    }
  } catch (e) {
    console.error('Kalshi error:', e);
  }
};

// Update Polymarket
const updatePolymarket = async () => {
  try {
    const res = await fetch(`${POLY_API}/stats`);
    if (!res.ok) throw new Error('Poly API error');
    const data = await res.json();
    
    const wins = data.wins || 0;
    const losses = data.losses || 0;
    const pnl = data.unredeemed_pnl || data.total_pnl || 0;
    const ratio = losses > 0 ? (wins / losses).toFixed(2) : wins > 0 ? '‚àû' : '0.00';
    
    document.getElementById('polyWins').textContent = wins;
    document.getElementById('polyLosses').textContent = losses;
    document.getElementById('polyWLRatio').textContent = ratio;
    
    const pnlEl = document.getElementById('polyPnL');
    pnlEl.textContent = fmt(pnl);
    pnlEl.className = `value ${pnl >= 0 ? 'positive' : 'negative'}`;
    
    if (data.balance) {
      document.getElementById('polyBalance').textContent = `$${data.balance.toFixed(2)}`;
    }
  } catch (e) {
    console.error('Poly error:', e);
  }
};

// Update positions
const updatePositions = async () => {
  try {
    const container = document.getElementById('positionsList');
    const countEl = document.getElementById('positionCount');
    let positions = [];
    
    try {
      const kRes = await fetch(`${API_BASE}/api/positions`);
      if (kRes.ok) {
        const kData = await kRes.json();
        positions = positions.concat((kData.positions || []).map(p => ({
          ...p, platform: 'kalshi', icon: 'üü¢'
        })));
      }
    } catch (e) {}
    
    try {
      const pRes = await fetch(`${POLY_API}/positions`);
      if (pRes.ok) {
        const pData = await pRes.json();
        positions = positions.concat((pData.positions || []).map(p => ({
          ...p, platform: 'polymarket', icon: 'üîµ'
        })));
      }
    } catch (e) {}
    
    countEl.textContent = `${positions.length} OPEN`;
    
    if (positions.length === 0) {
      container.innerHTML = '<div class="no-positions">‚ú® No active positions</div>';
      return;
    }
    
    container.innerHTML = positions.map(p => {
      const pnlPct = p.pnl_pct || 0;
      const pnlClass = pnlPct >= 0 ? 'positive' : 'negative';
      const alert = pnlPct <= -25 ? '<span class="position-alert">‚ö° -25% CHECK</span>' : '';
      
      return `
        <div class="position-row ${p.platform}">
          <div class="position-platform-icon">${p.icon}</div>
          <div class="position-details">
            <div class="position-market">${p.asset || p.ticker} ${p.direction || p.side?.toUpperCase()}</div>
            <div class="position-meta">Entry: ${p.entry_price}¬¢ ‚Üí ${p.current_price || '?'}¬¢</div>
          </div>
          <span class="position-pnl ${pnlClass}">${pnlPct >= 0 ? '+' : ''}${pnlPct.toFixed(1)}%</span>
          ${alert}
        </div>
      `;
    }).join('');
  } catch (e) {
    console.error('Positions error:', e);
  }
};

// Update trades
const updateTrades = async () => {
  try {
    const container = document.getElementById('tradesList');
    let trades = [];
    
    try {
      const kRes = await fetch(`${API_BASE}/api/trades`);
      if (kRes.ok) {
        const kData = await kRes.json();
        trades = trades.concat((kData.trades || []).slice(0, 10).map(t => ({
          ...t, platform: 'kalshi', icon: 'üü¢'
        })));
      }
    } catch (e) {}
    
    try {
      const pRes = await fetch(`${POLY_API}/trades`);
      if (pRes.ok) {
        const pData = await pRes.json();
        trades = trades.concat((pData.trades || []).slice(0, 10).map(t => ({
          ...t, platform: 'polymarket', icon: 'üîµ'
        })));
      }
    } catch (e) {}
    
    trades.sort((a, b) => new Date(b.timestamp || 0) - new Date(a.timestamp || 0));
    trades = trades.slice(0, 6);
    
    if (trades.length === 0) {
      container.innerHTML = '<div class="no-positions">‚ú® No recent trades</div>';
      return;
    }
    
    container.innerHTML = trades.map(t => {
      const won = t.won === true || t.pnl > 0 || t.pnl_usd > 0;
      const pnl = t.pnl || t.pnl_usd || 0;
      const pnlClass = pnl >= 0 ? 'positive' : 'negative';
      const outcome = won ? 'win' : 'loss';
      const market = t.asset || t.ticker?.split('-')[0] || '?';
      const side = t.direction || t.side?.toUpperCase() || '?';
      const time = t.timestamp ? new Date(t.timestamp).toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'}) : '?';
      
      return `
        <div class="trade-row ${t.platform}">
          <div class="trade-icon">${t.icon}</div>
          <div class="trade-info">
            <div class="trade-market">${market} ${side}</div>
            <div class="trade-meta">${t.platform} ‚Ä¢ ${time}</div>
          </div>
          <span class="trade-outcome ${outcome}">${won ? 'WIN' : 'LOSS'}</span>
          <span class="trade-pnl ${pnlClass}">${fmt(pnl)}</span>
        </div>
      `;
    }).join('');
  } catch (e) {
    console.error('Trades error:', e);
  }
};

const updateTimestamp = () => {
  document.getElementById('lastUpdate').textContent = new Date().toLocaleTimeString();
};

const updateAll = async () => {
  await Promise.all([
    updateKalshi(),
    updatePolymarket(),
    updatePositions(),
    updateTrades()
  ]);
  updateTimestamp();
};

updateAll();
setInterval(updateAll, 60000);
</script>

</body>
</html>
